# 以下為 GPT 出題
下面是一套模擬Ren「Python 後端工程師」筆試風格的【完整考古題練習集】。
題目分為兩部分：邏輯測驗與後端專業技術測驗。

每題皆含：題目描述、難度、核心能力、解題思路／標準答案（可作為參考解答）。


為符合「不可查詢」限制，題幹設計皆可在紙筆與本地編輯器思考完成。

---

## **第一部分：邏輯測驗（10 題）**

---

**題 1：真假話遊戲**

1. **題目描述**：A、B、C 三人只有一人說真話。

   * A 說：「B 是負責任務的人」
   * B 說：「C 是負責任務的人」
   * C 說：「A 是負責任務的人」
     誰負責任務？
2. **標準答案**：沒辦法確定，A 或 B 或 C 都可能。
3. **解題思路**：

   * 如果 A 負責：C 說真話，其他人說謊，OK
   * 如果 B 負責：A 說真話，其他人說謊，OK
   * 如果 C 負責：B 說真話，其他人說謊，OK
     三種情況都滿足條件，所以不能確定唯一答案。
4. **難度等級**：初級
5. **核心能力**：邏輯推理、一致性檢查

---

**題 2：連續數字加總**

1. **題目描述**：找出連續的正整數，讓它們加起來是 45。

   * 一種情況是可以只有一個數字
   * 另一種情況是至少要兩個數字
2. **標準答案**：

   * 可以只有一個數字：`[45]`
   * 至少兩個數字：`22 + 23 = 45`
3. **解題思路**：
   用等差數列公式快速找答案，先檢查 1 個數，再檢查 2 個數。
4. **難度等級**：初級
5. **核心能力**：數學計算與模式找尋

---

**題 3：貨車裝貨**

1. **題目描述**：有 3、4、7、8、9、11 公斤的箱子，貨車最大能載 20 公斤。可以剛好裝滿嗎？
2. **標準答案**：可以，例如 9 + 8 + 3 = 20。
3. **解題思路**：
   用「試組合」的方法找到剛好等於 20 的組合即可。
4. **難度等級**：初級
5. **核心能力**：組合搜尋與驗證

---

**題 4：翻轉二進位**

1. **題目描述**：29 的二進位是 `11101`，把 1 變 0、0 變 1（固定 5 位元），轉回十進位是多少？
2. **標準答案**：2
3. **解題思路**：
   11101 → 00010 → 十進位是 2。
4. **難度等級**：初級
5. **核心能力**：位元概念與進位制轉換

---

**題 5：會議室數量**

1. **題目描述**：會議時間：\[1,3]、\[2,4]、\[5,7]、\[6,8]。最少需要幾間會議室？
2. **標準答案**：2
3. **解題思路**：

   * 2\~3 時段同時有 2 場
   * 6\~7 時段同時有 2 場
     所以至少需要 2 間。
4. **難度等級**：中級
5. **核心能力**：時間重疊檢查

---

**題 6：最短路徑**

1. **題目描述**：A-B-C-D 是直線相連，還有一條直接連 A-D 的線。A 到 D 最短距離是多少？
2. **標準答案**：1
3. **解題思路**：直接走 A-D 就好。
4. **難度等級**：初級
5. **核心能力**：圖論基礎

---

**題 7：不同排列數**

1. **題目描述**：字串「AABBC」有多少種不同的排列方式？
2. **標準答案**：30
3. **解題思路**：公式 = 5! / (2! × 2!) = 30
4. **難度等級**：初級
5. **核心能力**：排列組合計算

---

**題 8：雙層迴圈次數**

1. **題目描述**：外圈 `i:0..n-1`，內圈 `j:0..i`，總共會跑幾次？
2. **標準答案**：n(n+1)/2
3. **解題思路**：就是 1 + 2 + … + n。
4. **難度等級**：初級
5. **核心能力**：時間複雜度計算

---

**題 9：最長不重複子字串**

1. **題目描述**：字串「abcabcbb」中，最長的不重複子字串長度是多少？
2. **標準答案**：3
3. **解題思路**：最長的是「abc」，長度 3。
4. **難度等級**：初級
5. **核心能力**：字串與滑動視窗演算法

---

**題 10：工作切割**

1. **題目描述**：8 單位的工作，要切成長度 3 的小段，最後不足 3 也可以。最少切幾刀？
2. **標準答案**：2
3. **解題思路**：切成 3、3、2 → 切 2 次。
4. **難度等級**：初級
5. **核心能力**：數學分段規劃

---

## **第二部分：後端專業技術測驗（15 題）**

---

**題 1：list 可變性**

1. **題目描述**：

   ```python
   a = [1, 2, 3]
   b = a
   a.append(4)
   print(b)
   ```

   會印出什麼？
2. **標準答案**：`[1, 2, 3, 4]`
3. **解題思路**：`a` 和 `b` 指向同一個 list，改一個會改到另一個。
4. **難度等級**：初級
5. **核心能力**：Python 可變型別

---

**題 2：生成器省記憶體**

1. **題目描述**：

   ```python
   squares_list = [x*x for x in range(10_000_000)]
   squares_gen  = (x*x for x in range(10_000_000))
   ```

   哪個比較省記憶體？
2. **標準答案**：`squares_gen` 比較省。
3. **解題思路**：生成器是用到才算，list 是一次全部存好。
4. **難度等級**：初級
5. **核心能力**：Python 記憶體管理

---

**題 3：保留錯誤上下文**

1. **題目描述**：怎麼捕捉 API 錯誤並加自己的訊息又保留原本錯誤？
2. **標準答案**：`raise NewError("說明") from e`
3. **解題思路**：`from e` 會保留原始錯誤堆疊。
4. **難度等級**：中級
5. **核心能力**：Python 例外處理

---

**題 4：MySQL 幻讀**

1. **題目描述**：SQL 標準中，哪個隔離級別能避免幻讀？InnoDB 怎麼處理？
2. **標準答案**：標準：`SERIALIZABLE`；InnoDB：`REPEATABLE READ` + 鎖定讀可避免插入幻影，普通讀用 MVCC。
   * InnoDB：在 REPEATABLE READ 下:
     * 一致性讀（快照讀）：用 MVCC，重複同查詢不會看見新插入列（等效避免幻影）。
     * 鎖定讀（SELECT ... FOR UPDATE/LOCK IN SHARE MODE）：用 next-key locks 阻擋範圍內新插入，避免幻影。
     * 建議補上「一致性讀也不會看到新行」這句以免誤解為只有鎖定讀才避免。 
3. **解題思路**：區分標準與 MySQL 特性。
4. **難度等級**：中級
5. **核心能力**：MySQL 交易控制

---

**題 5：正規化拆表**

1. **題目描述**：

   ```
   orders(order_id, customer_name, customer_phone, product_id, product_name, unit_price, qty, order_total)
   ```

   拆成至少 3NF。
2. **標準答案**：

   * customers(customer\_id, name, phone)
   * products(product\_id, name, unit\_price)
   * orders(order\_id, customer\_id, created\_at, …)
   * order\_items(order\_id, product\_id, qty, unit\_price\_at\_order)
3. **解題思路**：去重、消除傳遞依賴、保留歷史價格。
4. **難度等級**：中級
5. **核心能力**：資料庫設計

---

**題 6：查詢最佳化**

1. **題目描述**：對 `WHERE customer_id=? AND created_at BETWEEN ...`，該怎麼加索引？
2. **標準答案**：複合索引 `(customer_id, created_at)`。
   * 複合索引 (customer_id, created_at) 正確；若查詢只取 order_id, created_at 等索引覆蓋欄位，可形成 covering index（建議在題目中順便說明選取欄位，以強化教學性）。 
3. **解題思路**：符合最左前綴原則，查詢效率高。
4. **難度等級**：中級
5. **核心能力**：MySQL 索引設計

---

**題 7：Django N+1**

1. **題目描述**：列表頁每筆訂單都查一次客戶，怎麼優化？
2. **標準答案**：`select_related('customer')` 或 `prefetch_related()`。
3. **解題思路**：提前把資料一次抓好，減少查詢次數。
4. **難度等級**：中級
5. **核心能力**：Django ORM 優化

---

**題 8：請求追蹤 ID**

1. **題目描述**：Django 怎麼幫每個請求加追蹤 ID？
2. **標準答案**：middleware 產生 UUID，放進 request 與 response header。
3. **解題思路**：用 middleware 貫穿整個流程。
4. **難度等級**：中級
5. **核心能力**：Django Middleware 開發

---

**題 9：REST 狀態碼**

1. **題目描述**：訂單 API 的 CRUD 對應狀態碼？
2. **標準答案**：POST→201；GET→200/404；PUT/PATCH→200/204；DELETE→204
      * 更完整：POST /orders 成功時建議附 Location: /orders/{id} header。 
3. **解題思路**：依 HTTP 標準定義對應狀態碼。
4. **難度等級**：初級
5. **核心能力**：REST 設計規範

---

**題 10：API 版本化**

1. **題目描述**：給一種向後相容的版本化方法。
2. **標準答案**：URL 版本 `/v1/orders`。
3. **解題思路**：路徑中標版本，簡單清楚，但路由會增加。
4. **難度等級**：中級
5. **核心能力**：API 架構設計

---

**題 11：Gitflow 分支**

1. **題目描述**：Gitflow 中各分支用途？
2. **標準答案**：feature/\* 開發；develop 主線；release/\* 發布前穩定；hotfix/\* 緊急修。
3. **解題思路**：理解 Gitflow 主要分支與工作流程。
4. **難度等級**：初級
5. **核心能力**：版本控制流程

---

**題 12：rebase 衝突**

1. **題目描述**：rebase 發生衝突要怎麼處理並完成推送？
2. **標準答案**：`git add` → `git rebase --continue` → 測試 → `git push --force-with-lease`
3. **解題思路**：解衝突後繼續 rebase，最後安全推送。
4. **難度等級**：中級
5. **核心能力**：Git 衝突解決

---

**題 13：OAuth2 授權碼**

1. **題目描述**：簡述流程與安全重點。
2. **標準答案**：

   1. 用戶導向授權伺服器
   2. 用戶同意 → 回傳 code
   3. 用 code 換 token
   4. 用 token 存取資源
      安全：PKCE、redirect\_uri 驗證、scope 最小化、HTTPS
3. **解題思路**：掌握四步驟與安全檢查。
4. **難度等級**：中級
5. **核心能力**：API 認證安全

---

**題 14：API 冪等與重試**

1. **題目描述**：金流 API 怎麼設計重試不會重扣？
2. **標準答案**：用 Idempotency-Key，重試時帶相同 key；伺服器檢查 key 避免重扣。
3. **解題思路**：確保請求可重複但不影響結果。
4. **難度等級**：高級
5. **核心能力**：API 穩定性設計

---

**題 15：交易一致性**

1. **題目描述**：Django + MySQL 做下單 → 扣庫存 → 建金流紀錄，要保證一致性怎麼做？
2. **標準答案**：`transaction.atomic()` 包住流程，庫存用 `F()` 或鎖定，錯誤時 rollback。
3. **解題思路**：用資料庫交易確保全過或全不過。
4. **難度等級**：高級
5. **核心能力**：交易設計與資料一致性

---

# 以下為 GPT 第二次出題

---

下面這份「模擬筆試考古題」分成兩個部分：**邏輯測驗（10題）**與**後端專業技術測驗（15題）**。
每題都包含：題目描述、標準答案、詳細解題思路（用白話/像12歲程度能懂的方式解釋）、難度等級、測試的核心能力。
你可以直接按順序練習；若在有限時間內作答，建議先做會的、分數穩拿。

---

# 第一部分｜邏輯測驗（10題）

### 1) 數列推理：倍增加一

**題目**：數列 1, 3, 7, 15, 31, \_\_\_\_ 的下一個數是？

**答案**：63

**解題思路**：每次是「前一項 ×2 再 +1」：
1→(×2+1)=3；3→7；7→15；15→31；31→(×2+1)=63。

**難度**：初級

**測核心能力**：基本數列規律辨識

---

### 2) 邏輯真值：三個開關

**題目**：有三個開關(A/B/C)控制隔壁房間的一顆燈，但你只能進房間一次。房外每個開關都可多次切換。如何判斷哪個開關控制燈？

**答案**：先把A打開幾分鐘再關掉，立刻打開B，然後進房間：

* 如果燈亮→B；
* 不亮但燈泡溫熱→A；
* 不亮且冷→C。
  
**解題思路**：用「亮/不亮」+「熱/不熱」兩個訊號把三種情況區分。

**難度**：中級

**測核心能力**：策略設計、資訊編碼思維

---

### 3) 集合/必然性：至少兩人同月生日

**題目**：一個教室有13個人，至少有兩人生日在同一個月份嗎？

**答案**：是

**解題思路**：「抽屜原理」：12個月、13人，至少有一個月裝了≥2人。

**難度**：初級

**測核心能力**：抽屜原理、離散數學直覺

---

### 4) 時間與速率：相遇問題

**題目**：甲、乙相距30公里同一路線相向而行。甲速6 km/h，乙速4 km/h。幾小時相遇？

**答案**：3小時

**解題思路**：相對速度=6+4=10 km/h；時間=距離/速度=30/10=3。

**難度**：初級

**測核心能力**：速率基本運算

---

### 5) 布林/流程：燈號切換

**題目**：一盞燈初始為關。對它進行以下操作序列：切換、切換、保持、切換、保持。最後是亮還是滅？（切換=改變狀態）

**答案**：亮

**解題思路**：關→切換(亮)→切換(關)→保持(關)→切換(亮)→保持(亮)。

**難度**：初級

**測核心能力**：狀態機/流程追蹤

---

### 6) 陣列思維：找不重複最小值

**題目**：陣列 \[4, 1, 2, 1, 2, 3, 3, 5] 中，第一個**沒有重複**的最小元素是？

**答案**：4（5也不重複，但不是最小）

**解題思路**：先數頻率：1×2、2×2、3×2、4×1、5×1；不重複集合是{4,5}，最小是4。

**難度**：中級

**測核心能力**：計數、哈希思維

---

### 7) 字串規則：括號匹配

**題目**："(())()", "(()", "()())" 哪些是正確括號字串？

**答案**："(())()", 其餘錯

**解題思路**：用計數器：左括號+1、右括號-1，全程不<0，最後=0才合法。

* "(())()": 過程不負、結尾0 → 合法
* "(()": 結尾不為0 → 不合法
* "()())": 中途會負或結尾不為0 → 不合法

**難度**：中級

**測核心能力**：棧/計數器抽象

---

### 8) 估算與上界：最少抽幾次

**題目**：袋中有紅球10顆、藍球10顆。你最少抽幾顆，才能**必定**有兩顆同色？

**答案**：3

**解題思路**：最壞情況先抽到1紅1藍（2顆），第三顆無論紅或藍都和某顆同色。

**難度**：初級

**測核心能力**：最壞情況分析、抽屜原理

---

### 9) 圖形推理：格子走法（簡化）

**題目**：2×2 方格，從左上走到右下，只能向右或向下。共有幾條不同走法？

**答案**：6

**解題思路**：總共要走2步右(R)與2步下(D)，排列數 C(4,2)=6。

**難度**：中級

**測核心能力**：組合數學

---

### 10) 演算法估時：二分搜尋次數

**題目**：二分搜尋一個有序陣列，大小為 N=1,000。最壞情況比較幾次？

**答案**：⌈log₂(1000)⌉ ≈ ⌈9.966…⌉ = 10 次

**解題思路**：每次砍半，直到縮到1。

**難度**：中級

**測核心能力**：時間複雜度、對數直覺

---

# 第二部分｜後端專業技術測驗（25題）

### 1) Python 語法：可變/不可變與參數

**題目**：下面程式輸出為何？為什麼？

```python
def foo(x, arr):
    x += 1
    arr.append(x)

a = 10
b = [10]
foo(a, b)
print(a, b)
```

**答案**：`10 [10, 11]`

**解題思路**：`int`不可變，`a`在函式內加1只影響區域變數；`list`可變，`append`會改動原串列。

**難度**：初級

**測核心能力**：可變/不可變型別、參數傳遞

---

### 2) Python 進階：列表推導與生成器

**題目**：請寫出產生前5個平方數的**生成器**與**列表**各一行。

**答案**：

```python
gen = (i*i for i in range(1, 6))
lst = [i*i for i in range(1, 6)]
```

**解題思路**：生成器惰性、列表一次生成。

**難度**：初級

**測核心能力**：Python內建語法、記憶體意識

---

### 3) 例外處理與 with

**題目**：用 `with open('data.txt') as f:` 的好處？若檔案不存在，如何安全處理？

**答案**：`with` 自動關檔，避免資源外洩；用 `try/except FileNotFoundError` 包起來：

```python
try:
    with open('data.txt') as f:
        content = f.read()
except FileNotFoundError:
    content = ""
```

**解題思路**：語法糖/語意清楚，例外明確處理。

**難度**：初級

**測核心能力**：資源管理、例外處理

---

### 4) MySQL 正規化：消除重複欄位

**題目**：表 `orders(order_id, user_name, user_email, product_id, product_name)` 有什麼問題？如何正規化到第三正規化(3NF)？

**答案**：混雜了使用者與產品重複資訊，易不一致。應拆表：

* `users(user_id, user_name, user_email)`
* `products(product_id, product_name)`
* `orders(order_id, user_id, product_id, created_at, ...)`

**解題思路**：3NF要求非鍵欄位完全依賴主鍵、無傳遞依賴；名稱不應重複散落。

**難度**：中級

**測核心能力**：資料庫正規化

---

### 5) MySQL 查詢：分組與聚合

**題目**：查出每位使用者的訂單數與最後下單時間。

**答案**：

```sql
SELECT u.user_id,
       COUNT(o.order_id) AS order_count,
       MAX(o.created_at) AS last_order_time
FROM users u
LEFT JOIN orders o ON o.user_id = u.user_id
GROUP BY u.user_id;
```

**解題思路**：`LEFT JOIN` 保留無訂單者，`COUNT`/`MAX` 聚合。

**難度**：中級

**測核心能力**：JOIN、GROUP BY、聚合

---

### 6) MySQL 索引：何時建立複合索引

**題目**：API 常以 `(user_id, created_at DESC)` 查詢最新訂單。你會如何設索引？為何？

**答案**：建立複合索引 `(user_id, created_at)`。

**解題思路**：最左前綴原則，常用條件放前面；排序能利用索引順序。

**難度**：中級

**測核心能力**：索引設計、查詢優化

---

### 7) Django ORM：避免 N+1

**題目**：有 `Order` 外鍵到 `User`，模板中列出訂單與使用者名稱時發生 N+1 查詢，如何優化？

**答案**：用 `select_related('user')`：

```python
qs = Order.objects.select_related('user').all()
```

**解題思路**：一次把外鍵資料一併抓回，減少查詢次數。

**難度**：中級

**測核心能力**：Django ORM 效能

---

### 8) Django：Middleware 用途

**題目**：Middleware 可以做什麼？列舉兩個實用場景。

**答案**：在請求/回應流程中攔截與處理。例：

1. 記錄請求耗時；2) 驗證 API Token；3) 全域加安全Header(CSP)。

**解題思路**：Middleware 是請求處理鏈上的鉤子。

**難度**：初級

**測核心能力**：Django 請求生命週期

---

### 9) REST 設計：資源與狀態碼

**題目**：為資源 `orders` 設計基本端點與正確狀態碼。

**答案**：

* `POST /orders` → 201 Created（`Location` 指向 `/orders/{id}`）
* `GET /orders/{id}` → 200 OK / 404 Not Found
* `PATCH /orders/{id}` → 200 OK / 204 No Content（皆可）
* `DELETE /orders/{id}` → 204 No Content
* `GET /orders`（列表+分頁）→ 200 OK

**解題思路**：動詞對應資源操作、HTTP語義與狀態碼對齊。

**難度**：初級

**測核心能力**：REST基礎、HTTP語義

---

### 10) REST 實作：Idempotency（冪等）

**題目**：為何 `PUT` 應冪等？怎麼實作「建立轉帳請求」的冪等等級？

**答案**：同樣請求多次結果一致。做法：要求客戶端送 `Idempotency-Key`（唯一值），伺服器以此查重/落庫，重送則回傳首筆結果。

**解題思路**：避免網路重試造成重複扣款等副作用。

**難度**：中級

**測核心能力**：REST設計、併發安全

---

### 11) Git/Gitflow：分支策略

**題目**：簡述 Gitflow 主要分支與用途；修緊急線上 bug 應用哪條支線？

**答案**：主要分支：`main`（可發布）、`develop`（整合開發）。支線：`feature/*`、`release/*`、`hotfix/*`。線上緊急修：`hotfix/*` 從 `main` 開分支，修後合回 `main` 與 `develop`。

**解題思路**：Gitflow 明確分工、降低風險。

**難度**：初級

**測核心能力**：版本控制流程

---

### 12) Git：解衝突步驟

**題目**：合併分支時發生衝突，最小步驟如何解？

**答案**：

1. `git status` 找到衝突檔；
2. 手動編輯保留正確內容；
3. `git add` 標記已解；
4. `git commit` 完成合併（或 `--continue`）。

**解題思路**：理解衝突標記 `<<<<<<<` 等，決定取捨或合併。

**難度**：初級

**測核心能力**：衝突處理

---

### 13) 第三方串接：重試與退避

**題目**：呼叫第三方支付偶爾超時，如何設計重試？

**答案**：採**指數退避+抖動**（例如 200ms、400ms、800ms… 每次加隨機抖動），設定最大重試次數與總超時，並確保請求具冪等（例如 Idempotency-Key）。

**解題思路**：避免雪崩/同時重試風暴，保證安全。

**難度**：中級

**測核心能力**：韌性設計、分散式穩定性

---

### 14) OAuth 2.0：授權碼流程（含PKCE）

**題目**：簡述 Authorization Code with PKCE 流程與為何比隱式流程安全？

**答案**：

1. 用戶端產生 `code_verifier` 與 `code_challenge`，導向授權伺服器；
2. 使用者登入同意後得到 `authorization_code`；
3. 用戶端以 `authorization_code` + `code_verifier` 換取 access token；
   **安全性**：授權碼在伺服器端換取，配合 PKCE 可防攔截與代碼被盜用，較隱式（在瀏覽器直接給 token）安全。

**解題思路**：PKCE 綁定授權碼與真正的用戶端。

**難度**：中級

**測核心能力**：認證/授權機制理解

---

### 15) 系統設計：分頁與排序的穩定性

**題目**：大量資料用 `limit/offset` 可能因新資料插入導致「翻頁跳動」。如何改善？

**答案**：使用**游標分頁（keyset pagination）**，以穩定欄位（如 `created_at`, `id`）做 `WHERE (created_at,id) < (:last_created_at,:last_id)`，並加對應索引。

**解題思路**：offset 受插入影響，游標以邏輯游標連續。

**難度**：高級

**測核心能力**：高可用API設計與索引

---

### 16) Django：模型/遷移與資料一致性

**題目**：新增 `Order.status` 欄位（非空，預設 `pending`），如何安全上線？

**答案**：

1. 先以可為空新增欄位並預設 `pending`；
2. 後台批次把舊資料填補 `pending`；
3. 再把欄位改為 `NOT NULL`；
4. 部署分兩階段避免請求期間寫入失敗。

**解題思路**：避免一次性變更造成線上寫入錯誤。

**難度**：中級

**測核心能力**：零停機遷移策略

---

### 17) 安全性：防 SQL Injection 與 XSS

**題目**：Django/ORM 與模板如何分別防 SQL 注入與 XSS？

**答案**：

* SQLi：使用 ORM 綁參而不是字串拼接（`filter(name=param)`）；
* XSS：模板預設 auto-escape、對不信任輸入做過濾；若必要輸出HTML，審慎使用 `|safe`。

**解題思路**：輸入→查詢 分離；輸出→自動轉義。

**難度**：初級

**測核心能力**：Web 安全基礎

---

### 18) REST：一致性回應格式與錯誤

**題目**：設計一個統一錯誤回應格式，需含錯誤碼、訊息、追蹤ID。舉例 404 錯誤。

**答案**：

```json
{
  "error_code": "RESOURCE_NOT_FOUND",
  "message": "Order not found",
  "trace_id": "b8f0c3f2-..."
}
```

**解題思路**：一致格式便於前後端與監控串接；`trace_id` 方便追查。

**難度**：初級

**測核心能力**：API 規範化、可 observability

---

### 19) 效能：MySQL 交易與隔離級別

**題目**：說明 Read Committed 與 Repeatable Read 差異；MySQL InnoDB 預設是？

**答案**：
  * Read Committed：同一交易內可讀到別人**已提交**的新資料（不可重複讀仍可能發生）；
  * Repeatable Read：同一交易多次讀同一筆，結果一致（避免不可重複讀），MySQL InnoDB 預設為 Repeatable Read。

**解題思路**：一致性 vs 併發性平衡。

**難度**：中級

**測核心能力**：交易與隔離理解

---

### 20) 併發：悲觀/樂觀鎖

**題目**：訂單扣庫存避免超賣，舉一個 MySQL + Django 的安全做法。

**答案**：

* 悲觀鎖：`SELECT ... FOR UPDATE` 鎖定庫存列，在交易內扣減並提交；
* 樂觀鎖：加 `version` 欄位，`UPDATE ... WHERE id=? AND version=?`，成功則 `version+1`，失敗重試。

**解題思路**：兩派思路，依流量與衝突率選擇。

**難度**：高級

**測核心能力**：資料一致性、併發控制

---

### 21) Django REST Framework（DRF）：序列化與驗證

**題目**：用 DRF 建立 `Order` 的建立 API，如何在序列化器驗證 `amount > 0`？

**答案**：

```python
class OrderSerializer(serializers.ModelSerializer):
    class Meta:
        model = Order
        fields = ['id', 'amount', 'status']

    def validate_amount(self, value):
        if value <= 0:
            raise serializers.ValidationError("amount must be positive")
        return value
```

**解題思路**：欄位級驗證回傳或丟錯，DRF 會回 400。

**難度**：初級

**測核心能力**：DRF 基本功

---

### 22) 部署：設定管理與祕密

**題目**：如何在 Django 中管理不同環境設定與祕密（如 DB 密碼）？

**答案**：

* 使用環境變數（`os.environ`）+ 多設定檔（dev/staging/prod）；
* 不把祕密寫死在 repo，可用 `.env` 或祕密管理服務；
* 設定 `DEBUG`、允許主機、CORS 依環境區分。

**解題思路**：12-Factor App 原則。

**難度**：初級

**測核心能力**：部署實務、安全

---

### 23) 可觀測性：記錄/追蹤

**題目**：要快速查某筆請求的全鏈路狀態，後端該做哪些事？

**答案**：

* 產生 `trace_id`（或從 gateway/前端傳入）；
* 在 log/錯誤回傳裡帶上 `trace_id`；
* 紀錄關鍵事件（外部呼叫、DB查詢時間）與指標（P95延遲、錯誤率）；
* 使用結構化日誌(JSON)便於檢索。

**解題思路**：能關聯請求→服務→資源。

**難度**：中級

**測核心能力**：可觀測性設計

---

### 24) 安全：CSRF 與 JWT

**題目**：前後端分離使用 JWT，是否需要 CSRF 防護？

**答案**：

* 若 JWT 存在 **Cookie 且自動附帶**，仍需 CSRF 保護；
* 若 JWT 放在 `Authorization: Bearer` 且**不自動附帶**，CSRF 風險較低，但要防 XSS（避免 token 被竊）。

**解題思路**：CSRF 利用自動附帶憑證；Bearer 不自動附帶。

**難度**：中級

**測核心能力**：Web 安全權衡

---

### 25) 維運：資料庫備援與備份

**題目**：設計 MySQL 高可用：最少要有哪些機制？
**答案**：

* 主從/主主複寫（讀寫分離）；
* 自動故障轉移（如 MHA、Orchestrator）；
* 定期備份（全量+增量）與復原演練；
* 重要表加外鍵/約束與備援監控。

**解題思路**：故障時快速恢復、資料不遺失。

**難度**：高級

**測核心能力**：高可用架構、備援策略

---

## 使用建議（模擬真實筆試）

* **時間管理**：先做拿手題（REST、Django ORM、MySQL聚合），再攻克高級題（併發、索引/分頁策略）。
* **紙筆演算**：邏輯題可快速列規則、畫狀態變化箭頭。
* **簡潔作答**：專業題用**要點式**，SQL/Python能寫出**可執行**或**語法正確**的片段最加分。
* **穩定心態**：不會查資料，所以題目都不會需要冷門參數或指令；考的是你對核心的理解。


